!function(p){p.each(["frontend/element_ready/wd_products.default","frontend/element_ready/wd_products_tabs.default"],function(a,t){woodmartThemeModule.wdElementorAddAction(t,function(){woodmartThemeModule.quickShopVariationForm()})}),woodmartThemeModule.quickShopVariationForm=function(){function _(t){!1===t.data("product_variations")&&(t.addClass("wd-loading"),p.ajax({url:woodmart_settings.ajaxurl,data:{action:"woodmart_load_available_variations",id:t.data("product_id")},method:"get",dataType:"json",success:function(a){0<a.length&&t.data("product_variations",a).trigger("reload_product_variations")},complete:function(){t.removeClass("wd-loading")},error:function(){console.log("ajax error")}}))}woodmartThemeModule.$document.on("mouseenter touchstart mousemove",".product-grid-item.product-type-variable",function(){var i,s,d,n=p(this),r=n.find(".variations_form"),o=n.find(".button.product_type_variable"),l=n.find(".price").first(),c=n.find(".product-image-link > img, .product-image-link > picture > img"),u=n.find(".product-image-link picture source"),a=c.attr("src"),t=c.attr("srcset"),e=c.attr("sizes"),m=o.text(),h=woodmart_settings.add_to_cart_text,v=l.html(),w=n.find(".wd-product-stock"),f=n.find(".wd-product-sku").find("span").not(".wd-label");function g(a){a.data("product_variations")&&(o.find("span").text(m),o.data("purchasable",!1),n.removeClass("wd-variation-active"),a.find(".variations select").each(function(){var a=p(this),t=a.parent().find(".wd-swatches-product"),e=a.html(),e=p(e);a.val()&&(o.find("span").text(h),o.data("purchasable",!0),n.addClass("wd-variation-active")),t.find(".wd-swatch").removeClass("wd-enabled").addClass("wd-disabled"),e.each(function(){var a=p(this).val();p(this).hasClass("enabled")?t.find('div[data-value="'+a+'"]').removeClass("wd-disabled").addClass("wd-enabled"):t.find('div[data-value="'+a+'"]').addClass("wd-disabled").removeClass("wd-enabled")})}))}r.length&&!r.hasClass("wd-variations-inited")&&(w.length&&(i=w.text(),s=w.attr("class")),f.length&&(d=f.text()),r.wc_variation_form(),r.addClass("wd-variations-inited"),r.on("click",".wd-swatch",function(){var e,a=p(this),t=a.parents(".product-grid-item"),i=a.data("value"),s=a.parent().data("id"),s=r.find("select#"+s);if(r.hasClass("wd-form-inited")||(r.addClass("wd-form-inited"),_(r)),g(r),a.parents(".variations_form.wd-clear-double").length&&a.hasClass("wd-active"))return s.val("").trigger("change"),a.removeClass("wd-active"),e=!1,t.find(".wd-swatch").each(function(a,t){if(p(t).hasClass("wd-active"))return e=!0}),void(e||t.trigger("wdImagesGalleryInLoopOn",t));a.hasClass("wd-active")||a.hasClass("wd-disabled")||(s.val(i).trigger("change"),a.parent().find(".wd-active").removeClass("wd-active"),a.addClass("wd-active"),t.trigger("wdImagesGalleryInLoopOff",t),g(r))}),r.on("change","select",function(){if(r.hasClass("wd-form-inited"))return!1;r.addClass("wd-form-inited"),_(r)}),r.on("show_variation",function(a,t,e){r.find(".wd-swatch").length&&!r.find(".wd-swatch.wd-active").length&&r.find("select").each(function(){var a=p(this),t=a.val();t&&a.siblings(".wd-swatches-product").find(".wd-swatch[data-value="+t+"]").addClass("wd-active")}),1<t.price_html.length&&l.html(t.price_html),1<t.image.thumb_src.length&&(n.addClass("wd-loading-image"),c.attr("src",t.image.thumb_src),c.attr("srcset")&&!t.image.srcset&&c.attr("srcset",t.image.thumb_src),c.one("load",function(){n.removeClass("wd-loading-image")})),1<t.image.srcset.length&&(c.attr("srcset",t.image.srcset),0<u.length&&u.attr("srcset",t.image.srcset)),1<t.image.sizes.length&&(c.attr("sizes",t.image.sizes),0<u.length&&u.attr("image_sizes",t.image.sizes)),w.length&&(t.availability_html?(w.removeClass("in-stock available-on-backorder out-of-stock"),0<t.availability_html.search("available-on-backorder")?w.addClass("available-on-backorder"):0<t.availability_html.search("out-of-stock")?w.addClass("out-of-stock"):w.addClass("in-stock"),w.text(t.availability_html.replace(/<\/?[^>]+(>|$)/g,""))):(w.attr("class",s),w.text(i))),f.length&&(t.sku?f.text(t.sku):f.text(d)),r.addClass("variation-swatch-selected")}),r.on("woocommerce_update_variation_values",function(){g(r)}),r.on("hide_variation",function(){l.html(v),o.find("span").text(m),c.attr("src")!==a&&(c.attr("src",a),c.attr("srcset",t),c.attr("sizes",e)),0<u.length&&u.attr("srcset")!==t&&(u.attr("srcset",t),u.attr("image_sizes",e)),w.length&&(w.attr("class",s),w.text(i)),f.length&&f.text(d)}),r.on("click",".reset_variations",function(){r.find(".wd-active").removeClass("wd-active"),r.removeClass("wd-form-inited"),n.trigger("wdImagesGalleryInLoopOn",n)}),r.on("reset_data",function(){var a=p(this),t=!0;r.find(".variations select").each(function(){0===(a.val()||"").length&&(t=!1)}),t&&r.find(".wd-active").removeClass("wd-active"),r.removeClass("variation-swatch-selected"),g(r)}),o.on("click",function(a){var t=r.find(".single_add_to_cart_button");p(this).data("purchasable")&&t.length&&(a.preventDefault(),"undefined"!=typeof wc_add_to_cart_variation_params&&t.hasClass("disabled")?t.hasClass("wc-variation-is-unavailable")?alert(wc_add_to_cart_variation_params.i18n_unavailable_text):t.hasClass("wc-variation-selection-needed")&&alert(wc_add_to_cart_variation_params.i18n_make_a_selection_text):(r.trigger("submit"),o.addClass("loading"),woodmartThemeModule.$body.one("added_to_cart",function(){o.removeClass("loading").addClass("added")})))}))})},p(document).ready(function(){woodmartThemeModule.quickShopVariationForm()})}(jQuery);