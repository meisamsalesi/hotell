!function(w){"use strict";woodmartThemeModule.$document.on("wdReplaceMainGallery",function(){woodmartThemeModule.productVideoGallery()}),w.each(["frontend/element_ready/wd_single_product_gallery.default"],function(e,d){woodmartThemeModule.wdElementorAddAction(d,function(){woodmartThemeModule.productVideoGallery()})}),woodmartThemeModule.productVideoGallery=function(){var a=w(".woocommerce-product-gallery__wrapper:not(.quick-view-gallery)"),d=a.parents(".woocommerce-product-gallery"),e=w(".variations_form");function l(d){var a,e=d.find("iframe"),i=d.find(".wd-play-video"),o=new YT.Player(e[0],{events:{onReady:function(){d.hasClass("wd-video-muted")?o.mute():o.unMute();o.setLoop(!0),d.removeClass("wd-loading"),!d.hasClass("wd-video-playing")||woodmartThemeModule.$window.width()<=768&&e.attr("src").indexOf("autoplay=1")&&e.attr("src").indexOf("mute=1")?(d.addClass("wd-video-playing"),o.playVideo()):(d.removeClass("wd-video-playing"),o.pauseVideo())},onStateChange:function(e){d.hasClass("wd-overlay-hidden")&&(e.data===YT.PlayerState.PLAYING?r("hide"):e.data!==YT.PlayerState.PAUSED||d.hasClass("wd-video-design-native")||r("show"));a=e.data}}});i.on("click",function(){a===YT.PlayerState.UNSTARTED?"function"==typeof o.playVideo&&o.playVideo():d.hasClass("wd-video-playing")?(d.removeClass("wd-video-playing"),"function"==typeof o.pauseVideo&&o.pauseVideo()):(d.addClass("wd-video-playing"),"function"==typeof o.playVideo&&o.playVideo())})}function t(e){var d=e.find("iframe"),a=e.find(".wd-play-video"),i=new Vimeo.Player(d);i.setLoop(!0),e.hasClass("wd-video-muted")?i.setVolume(0):i.setVolume(1),i.on("timeupdate",function(){e.hasClass("wd-loading")&&(e.addClass("wd-video-playing"),e.removeClass("wd-loading"),e.hasClass("wd-overlay-hidden"))&&r("hide")}),!e.hasClass("wd-video-design-native")&&e.hasClass("wd-overlay-hidden")&&i.on("pause",function(){r("show")}),e.hasClass("wd-video-playing")?(i.pause(),e.removeClass("wd-video-playing")):i.play(),e.hasClass("wd-loaded")&&(e.addClass("wd-video-playing"),e.removeClass("wd-loading"),e.hasClass("wd-overlay-hidden")&&r("hide"),e.removeClass("wd-loaded")),a.on("click",function(){e.hasClass("wd-video-playing")?(e.removeClass("wd-video-playing"),i.pause()):(e.addClass("wd-video-playing"),i.play())})}function r(e){a.hasClass("owl-carousel")&&("hide"===e?d.addClass("wd-hide-overlay-info"):"show"===e&&d.removeClass("wd-hide-overlay-info"))}woodmartThemeModule.$document.on("click",".product-image-wrap.wd-with-video .wd-play-video",function(e){e.preventDefault();var d,a,i,o,n,e=w(this).parents(".product-image-wrap"),s=e.find("iframe");s.length||(s=e.find("video")),!e.hasClass("wd-inited")&&s.length&&((n=s.attr("src"))||(n=s.data("lazy-load"),s.attr("src",n)),n)&&(e.hasClass("wd-video-playing")||e.addClass("wd-loading"),s=n,(d=e).addClass("wd-inited"),s.indexOf("vimeo.com")+1?"undefined"==typeof Vimeo||void 0===Vimeo.Player?w.getScript(woodmart_settings.vimeo_library_url,function(){a=setInterval(function(){"undefined"!=typeof Vimeo&&(clearInterval(a),t(d))},100)}):t(d):s.indexOf("youtube.com")+1?"undefined"==typeof YT||void 0===YT.Player?(d.hasClass("wd-video-playing")&&d.find(".wd-video-actions").addClass("wd-loading"),w.getScript("https://www.youtube.com/iframe_api",function(){a=setInterval(function(){void 0!==YT.Player&&(clearInterval(a),l(d),d.find(".wd-video-actions").removeClass("wd-loading"))},100)})):l(d):(o=(i=d).find("video"),n=i.find(".wd-play-video"),o.on("loadedmetadata",function(){i.removeClass("wd-loading"),o[0].play(),i.addClass("wd-video-playing")}),i.hasClass("wd-overlay-hidden")&&(o.on("play",function(){r("hide")}),i.hasClass("wd-video-design-native")||o.on("pause",function(){r("show")})),i.hasClass("wd-video-muted")?o.prop("muted",!0):o.prop("muted",!1),i.hasClass("wd-video-playing")?(o[0].pause(),i.removeClass("wd-video-playing")):i.hasClass("wd-loaded")&&(i.removeClass("wd-loading"),o[0].play(),i.addClass("wd-video-playing")),n.on("click",function(){i.hasClass("wd-video-playing")?(o[0].pause(),i.removeClass("wd-video-playing")):(i.addClass("wd-video-playing"),o[0].play())})))}),woodmartThemeModule.$document.on("wdPhotoSwipeBeforeInited",function(e,d){d.listen("initialLayout",function(){void 0!==d.items&&d.items&&w.each(d.items,function(e,d){void 0!==d.mainElement&&d.mainElement.hasClass("wd-video-playing")&&d.mainElement.hasClass("wd-inited")&&d.mainElement.find(".wd-play-video").trigger("click")})}),d.listen("close",function(){void 0!==d.currItem.container&&w(d.currItem.container).parents(".pswp__container").find(".pswp__item").each(function(){var e=w(this).find(".wd-with-video.wd-video-playing");e.length&&e.find(".wd-play-video").trigger("click")})})}),a.find(".product-image-wrap.wd-with-video").length&&a.on("changed.owl.carousel",function(e){e=a.find(".owl-item").eq(e.item.index).find(".product-image-wrap");e.hasClass("wd-overlay-hidden")&&(e.hasClass("wd-video-playing")||e.hasClass("wd-video-design-native")&&e.hasClass("wd-video-hide-thumb"))?r("hide"):!d.hasClass("wd-hide-overlay-info")||e.hasClass("wd-overlay-hidden")&&e.hasClass("wd-video-playing")||r("show")}),e.length&&e.on("show_variation",function(e,d){a.find(".product-image-wrap.wd-video-playing").each(function(){var e=w(this);(e.find(".wp-post-image").length||e.hasClass("wd-inited"))&&e.find(".wd-play-video").trigger("click")})})},w(document).ready(function(){woodmartThemeModule.productVideoGallery()})}(jQuery);